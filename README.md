# Simple-white-page-finder
白紙を探す簡単なスクリプト

### 概要
 
 自炊した書籍をjpegファイルなどで一旦保存すると、紙の書籍であるうちは特に気にならなかった白紙のページが気になり始めます。スキャンすると見た目には白紙なのに結構な容量になっていたりして、数が増えるとそれなりにストレージを圧迫してしまうからでしょうかね。
 ということで、とりあえず「これ、白紙じゃないの？」というファインダーを作りました。
 explorer など、画像ファイルのサムネイルをそのままアイコン化してしまうものをお使いの時は全然必要のないものです。
 
 へっぽこpythonプログラムです。python でOpenCV2を使うための練習で作りました。
 例によってコーディングお作法は知りません。動けばいいやくらいのカンジで。
 
## 動作環境

* python (2.7系)
* OpenCV (2.x系)
* numpy 

 がインストールされていること。
 cygwin, Linux 等のターミナル＋シェル環境で動きます。コマンドプロンプトでも動くかもしれませんが、検証していません。
 
## 使い方

 インストールは特に必要ありません。できたら PATH の通っているところに置いて下さい。OpenCV2 および numpy については解説を他に譲ります。
 
```
 chmod +x wP.py
```
 jpegファイルが沢山あるディレクトリに移動して
```
wP.py *.jpg
```
 とやると、白紙と思しきものを報告してくれます。一応、jpeg, JPG, jpg, PNG, png の拡張子には対応しています。
 
## 原理

 一旦グレイスケールに変換した後、縦ラインおよび横ラインで全スキャンをかけて、しきい値以下のラインが見つからなければ白紙としています。しきい値は threshold でスクリプト内で設定します。
 古い書籍やスキャナの調整など、ネガティブな要素に対しての対抗手段はインプリしていません。というか、やってみましたが誤認が多くて苦慮しています。
  ChainLP などを使ってガンマ補正をした後でやったほうがいいんじゃないのかなと思います。

## 拡張予定

ファーストリリースは単純に白紙の存在を教えてくれるものを自分の用途に合わせて作りました。次は白紙をみかけたら問答無用で消す起動スイッチとか、消し去るためのシェルスクリプトを標準出力する起動スイッチとかをちょこちょこ作ると思います。
